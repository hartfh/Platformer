<html>
<title>Platformer</title>
<head>
	<style>
		html {
			background: #202020;
		}
		canvas {
			border: 1px solid white;
			position: absolute;
			height: 500px;
			left: 0;
			top: 0;
			width: 1100px;
		}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="js/constants.js"></script>
	<script src="js/utilities.js"></script>
	<script src="js/PixelGrid.js"></script>
	<script src="js/Layer.js"></script>
	<script src="js/Viewport.js"></script>
	<script src="js/Graph.js"></script>
	<script src="js/Node.js"></script>
	<script src="js/AssetGenerator.js"></script>
	<script src="js/Asset.js"></script>
</head>
<body>
	<div id="platformer-app-container"></div>

	<script>
		var PlatformerApp = function(config) {
			if( typeof(config) != 'object' ) {
				throw('PlatformerApp missing required parameters for configuration.');
			}

			var _self				= this;
			var _layerGenerator		= new AssetGenerator(Layer);
			var _viewportGenerator	= new AssetGenerator(Viewport);
			var _pxGridGenerator	= new AssetGenerator(PixelGrid);

			// Consider having Layer, Viewport and Grid all extend a basic Asset class

			_pxGridGenerator.addAsset({
				name:	'test-grid',
				width:	880,
				height:	540
			});
			_pxGridGenerator.addAsset({
				name:	'test-gridXX',
				width:	880,
				height:	540
			});

			console.log( _pxGridGenerator.getAssets() );
			console.log( _viewportGenerator.getAssets() );

			_pxGridGenerator.eachAsset(function(asset, handle) {
				console.log(asset);
				console.log(handle);
			})

			/*
			var _self		= this;
			var _layers	= [];
			var _viewports	= [];
			var _grid		= {};
			*/

			/*
			this.eachViewport = function(callback) {
				for(var i in _viewports) {
					var viewport = _viewports[i];

					callback(viewport);
				}
			}

			this.addPixelGrid = function() {

			}

			this.addViewport = function(vportConfig) {
				if( typeof(vportConfig) != 'object' ) {
					throw('Viewport missing configuration object');
				}

				var viewport = new Viewport(vportConfig);

				_viewports.push(viewport);

				// consider how to re-order viewports
			}

			this.addLayer = function() {

			}

			// addLayer (need way to re-order layers?)

			this.draw = function() {
				_self.eachViewport(function(viewport) {
					// draw all layers
				});
			}
			*/
		};

		var app = new PlatformerApp({});

		var pxGrid = new PixelGrid({
			width:	880,
			height:	540
		});

		var testLayer = new Layer({
			name:	'layer1'
		});
	</script>
</body>
</html>
